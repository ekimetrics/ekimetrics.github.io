<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Eki.Lab Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Eki.Lab Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-124520099-9","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Deploying your Data Science app to the Cloud | Eki.Lab</title><meta data-react-helmet="true" property="og:title" content="Deploying your Data Science app to the Cloud | Eki.Lab"><meta data-react-helmet="true" name="description" content="Let&#x27;s explore how we, at Ekimetrics, automate the deployment of our data apps on the cloud. This article will gather elements from our internal &amp; external workshops presented at Datacraft and also the video presenting some docker best practices for industrialization. "><meta data-react-helmet="true" property="og:description" content="Let&#x27;s explore how we, at Ekimetrics, automate the deployment of our data apps on the cloud. This article will gather elements from our internal &amp; external workshops presented at Datacraft and also the video presenting some docker best practices for industrialization. "><meta data-react-helmet="true" property="og:image" content="http://ekimetrics.github.io/img/10-cubecube03.jpg"><meta data-react-helmet="true" name="twitter:image" content="http://ekimetrics.github.io/img/10-cubecube03.jpg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Deploying your Data Science app to the Cloud | Eki.Lab"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="keywords" content="Data Science,EkiLab,Ekimetrics,Eki.Lab,Eki,Machine Learning,Artificial Intelligence,Data Engineering,App and Web Development,Data Science for business"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/styles.112324ad.css">
<link rel="preload" href="/styles.a86cb2b9.js" as="script">
<link rel="preload" href="/runtime~main.16ee1cc3.js" as="script">
<link rel="preload" href="/main.1ce0ccbc.js" as="script">
<link rel="preload" href="/1.d09c2bfd.js" as="script">
<link rel="preload" href="/2.3a5ef20e.js" as="script">
<link rel="preload" href="/154.528a8f1d.js" as="script">
<link rel="preload" href="/01a85c17.ad84d4ef.js" as="script">
<link rel="preload" href="/1be78505.834197f3.js" as="script">
<link rel="preload" href="/56ff6114.a42a20d4.js" as="script">
<link rel="preload" href="/6875c492.61005495.js" as="script">
<link rel="preload" href="/a6aa9e1f.fa005530.js" as="script">
<link rel="preload" href="/bc11c333.84a44cd2.js" as="script">
<link rel="preload" href="/c4f5d8e4.99070e4e.js" as="script">
<link rel="preload" href="/ccc49370.f2fa0dcb.js" as="script">
<link rel="preload" href="/157.c62993df.js" as="script">
<link rel="preload" href="/ece8ad2d.ef5e4502.js" as="script">
<link rel="preload" href="/dc395c26.c29b3d37.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">Eki.Lab</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/">About us</a><a class="navbar__item navbar__link" href="/resources/">Resources</a><a href="https://ekimetrics.com/fr/carrieres/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Careers</a></div><div class="navbar__items navbar__items--right"><a href="https://ekimetrics.com/fr/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ekimetrics website</a><a href="mailto:inno@ekimetrics.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact us!</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Eki.Lab</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">About us</a></li><li class="menu__list-item"><a class="menu__link" href="/resources/">Resources</a></li><li class="menu__list-item"><a href="https://ekimetrics.com/fr/carrieres/" target="_blank" rel="noopener noreferrer" class="menu__link">Careers</a></li><li class="menu__list-item"><a href="https://ekimetrics.com/fr/" target="_blank" rel="noopener noreferrer" class="menu__link">Ekimetrics website</a></li><li class="menu__list-item"><a href="mailto:inno@ekimetrics.com" target="_blank" rel="noopener noreferrer" class="menu__link">Contact us!</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container container-wide margin-vert--lg"><div class="row"><div class="col col--2"></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_kDB-">Deploying your Data Science app to the Cloud</h1><div class="margin-vert--md"><p>Let&#x27;s explore how we, at Ekimetrics, automate the deployment of our data apps on the cloud. This article will gather elements from our internal &amp; external workshops presented at Datacraft and also the video presenting some docker best practices for industrialization. </p><time datetime="2022-04-21T00:00:00.000Z" class="blogPostDate_2HVl">April 21, 2022  · 11 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name">Written by <a href="mailto:inno@ekimetrics.com" target="_blank" rel="noreferrer noopener">Axel Richier</a></h4><small class="avatar__subtitle">Tech Lead Data Engineering &amp; Architecture</small></div></div><div class="margin-vert--md"><img class="img-blog-header" src="/./img/blog/annie-spratt-unsplash.jpg"></div></header><section class="markdown blog-article-custom"><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tldr"></a>TL;DR<a class="hash-link" href="#tldr" title="Direct link to heading">#</a></h4><p>Using optimized containers images in your favourite CI/CD pipeline will help you deploy your Data Science app quickly &amp; easily. Check out the replay of our <a href="https://www.youtube.com/watch?v=C7v5lY2G4Os" target="_blank" rel="noopener noreferrer">workshop</a> at Datacraft and our Mastercraft video about<a href="https://www.youtube.com/watch?v=lkL3Ve7sDfc&amp;t=97s&amp;ab_channel=datacraft" target="_blank" rel="noopener noreferrer"> container best practices</a>.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="data-science-storytelling-with-streamlit"></a>Data Science storytelling with Streamlit<a class="hash-link" href="#data-science-storytelling-with-streamlit" title="Direct link to heading">#</a></h2><p>Over the past year, <a href="https://streamlit.io/" target="_blank" rel="noopener noreferrer">Streamlit</a> has become one of our favourite tools to share data insights through a web app. It&#x27;s a low-code, data science oriented Python framework that makes your scripts shine in a web app. You can use it to quickly build beautiful visualizations but as data is even better when shared, we would like to help you make it easily accessible to your teammates and colleagues. We will deploy one of the apps in the Streamlit Gallery : <a href="https://github.com/streamlit/demo-uber-nyc-pickups/" target="_blank" rel="noopener noreferrer">NYC Uber Ridesharing Data</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running-the-app"></a>Running the app<a class="hash-link" href="#running-the-app" title="Direct link to heading">#</a></h3><p>Let&#x27;s keep it simple and follow these steps to get the code and use venv to create a virtual environment with the following steps:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-zsh codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; git clone git@github.com:streamlit/demo-uber-nyc-pickups.git</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; cd demo-uber-nyc-pickups</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; py -3.8 -m venv .venv</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; .venv/scripts/activate</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">&gt; pip install -r requirements.txt</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>We are showcasing <a href="https://docs.python.org/3/library/venv.html" target="_blank" rel="noopener noreferrer">venv</a> here as it is included in Python itself. We invite you to explore other tools such as <a href="https://python-poetry.org/" target="_blank" rel="noopener noreferrer">Poetry</a>, <a href="https://pipenv.pypa.io/en/latest/" target="_blank" rel="noopener noreferrer">pipenv</a> or <a href="https://docs.conda.io/en/latest/" target="_blank" rel="noopener noreferrer">conda</a> depending on your needs and preferences and to always make use of them, especially when collaborating on multiple projects as it will save you from conflicts in your installations.</p></div></div><p>Now, you should be able to run it locally:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">streamlit run index.py </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="screenshot-app" src="/assets/images/screenshot-app-144427ee5ac05be241dfd0d8c9140c69.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="docker-the-cloudy-whale"></a>Docker, the cloudy whale<a class="hash-link" href="#docker-the-cloudy-whale" title="Direct link to heading">#</a></h2><p>Docker is one of the most popular containerization tools and is widely used in the context of cloud-based solutions. In this article, we will review how to set up your environment so that you can leverage this tool and level up your development workflow! </p><p>The advantage we will explore in this article is the ability to package your environment with all its dependencies and be 99.99% sure that it will be able to run on your target environment. </p><blockquote><p>&quot;If it runs on Docker, it will run everywhere.&quot; - one hopeful DataOps</p></blockquote><p>You can safely share your app and be sure that it will run in the same conditions as you worked on and ensure reproducibility of your results. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-your-container"></a>Creating your container<a class="hash-link" href="#creating-your-container" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="write-dockerfile"></a>Write Dockerfile<a class="hash-link" href="#write-dockerfile" title="Direct link to heading">#</a></h4><p>The Dockerfile is the recipe of your container. It contains all the instructions to produce &amp; reproduce it identically everywhere it will be run: on another laptop, maybe with a different OS, in the cloud.</p><p>Some quick definitions:</p><ul><li>The Docker image is the result of the build of the Dockerfile.</li><li>The Docker container is the result of running the image.</li><li>You can pull and push images to a container registry.</li></ul><p><img alt="Docker definitions schema" src="/assets/images/docker-definitions-schema-742ad3f8ebb9c6e95b4f6b99bcc6601c.gif"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="choosing-the-base-image"></a>Choosing the base image<a class="hash-link" href="#choosing-the-base-image" title="Direct link to heading">#</a></h4><p>It always starts with a <strong>FROM</strong> instruction that defines what is the base image which can be either:</p><ul><li>a linux-based OS: <a href="https://hub.docker.com/layers/ubuntu/library/ubuntu/latest/images/sha256-31cd7bbfd36421dfd338bceb36d803b3663c1bfa87dfe6af7ba764b5bf34de05?context=explore" target="_blank" rel="noopener noreferrer">ubuntu</a>, <a href="https://hub.docker.com/layers/debian/library/debian/stable/images/sha256-7ec7bef742f919f7cc88f41b598ceeb6b74bcb446e9ce1d2d7c31eb26ccba624?context=explore" target="_blank" rel="noopener noreferrer">debian</a>, <a href="https://hub.docker.com/layers/centos/library/centos/latest/images/sha256-a1801b843b1bfaf77c501e7a6d3f709401a1e0c83863037fa3aab063a7fdb9dc?context=explore" target="_blank" rel="noopener noreferrer">centos</a>...</li><li>an OS with preinstalled tools: <a href="https://hub.docker.com/layers/python/library/python/3.8/images/sha256-71d10e809efb1733e2743fb7be3417db18070e10a2276e727216f245f7418592?context=explore" target="_blank" rel="noopener noreferrer">python-3.8</a>, <a href="https://hub.docker.com/layers/mongo/library/mongo/5.0.7/images/sha256-5b5263a7d25d06d5149904eaaacdb359edcd4f26a3d971265f85362dd2406655?context=explore" target="_blank" rel="noopener noreferrer">mongo-5.0.7</a>, <a href="https://hub.docker.com/layers/node/library/node/17.9.0/images/sha256-c1336669570df673e44d5a2152eb4eff99f4c23bb3d19361c69f861b1bd5ffd3?context=explore" target="_blank" rel="noopener noreferrer">node-17.9.0</a></li><li>a ready-to-use image of a project like the <a href="https://hub.docker.com/r/docker/getting-started" target="_blank" rel="noopener noreferrer">Docker Tutorial</a>.</li></ul><p>Choosing your base image is important as it can help you reduce the amount of steps to get ready. If you chose Ubuntu as your base image for a Python project, you will need to write the instructions to install the Python version you want to install and your image will also come with many other packages that are preinstalled in the OS that you may not need for your projet. This is why Python images are available. It comes with Python already installed and some images (like slim images) also remove packages that aren&#x27;t necessary for Python development. This strongly impacts the size of your image as shown here:</p><p><img alt="Python Docker images size comparison" src="/assets/images/python-docker-images-size-comparison-8648b2ea9f9ef5fbaace2501f6fee442.png">
These are official Docker images and depending on which version you pull, you can see the size difference is quite noticeable.</p><ul><li>python 3.8 is almost 1GB.</li><li>python 3.8-slim reduces it by 86%.</li><li>python 3.8-alpine even goes down to &lt;50MB.</li></ul><p>Alpine is not recommended for Python development as standard PyPi wheels don&#x27;t work on Alpine and you have to compile them for every package, which can lead to additional research to properly achieve it. In some instances, compiling can also be very lengthy, like matplotlib that takes more than 25min to build:</p><p><img alt="matplotlib-build-alpine" src="/assets/images/python-matplotlib-79daf5b8811d2475b4ebc732d659ec16.png"></p><p>Nobody ain&#x27;t got time for that. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="efficient-build-instructions"></a>Efficient Build Instructions<a class="hash-link" href="#efficient-build-instructions" title="Direct link to heading">#</a></h3><p>So let&#x27;s build our image using a small, ready-to-python image like <code>python:3.8-slim</code>. We first need to install all our app requirements. So we add our <code>requirements.txt</code> file and install just like we would do locally :</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Dockerfile codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">FROM python:3.8-slim</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># We place ourself in a dedicated folder</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Installing requirements</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ADD ./requirements.txt /app/requirements.txt</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">RUN pip3 install -r requirements.txt --no-cache-dir</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Adding the file alone and installing the requirements right after allows you to create a layer that will be cached and you will not have to reuse this step in a future build. It is generally a good practice to use the cache when in development mode as you don&#x27;t want to spend 10 minutes at every build of your requirements (you know it can take a while). The way Docker cache works is that by default it will reuse the highest unmodified layers.</p><p><img alt="docker-cache-example" src="/assets/images/docker-cache-example-18ec05ab2a069080c94be26d3cb1aab1.gif"></p><p>Here are the commands that generate a layer and which you want to be able to cache and/or gather in a single instruction.</p><ul><li><strong>FROM</strong> creates a layer from the base image.</li><li><strong>COPY</strong> adds files from your Docker client’s current directory.</li><li><strong>RUN</strong> builds your application with make.</li><li><strong>CMD</strong> specifies what command to run within the container.</li></ul><p><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">Source</a></p><p>Then, we add the different required files with the <em>ADD</em> or <em>COPY</em> instructions. In our example, we need the python main code, the data and one image.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Dockerfile codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">ADD streamlit_app.py  uber-raw-data-sep14.csv.gz  uber_demo.png /app/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To access the app, we need to open port 8051 on the container. Otherwise, even if the app is running, it will not be accessible from outside the container by a browser. Instruction is :</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Dockerfile codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 8051</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The last instruction is the <em>RUN</em>, which tells Docker which command needs to be run at the start of the container. For us, it means starting the Streamlit app with the command <code>streamlit run /index.py</code>, which in Docker syntax is:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Dockerfile codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">CMD [&quot;streamlit&quot;, &quot;run&quot; ,&quot;/index.py&quot;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The final Dockerfile should look like this:</p><div class="mdxCodeBlock_1zKU"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_2eSY">Dockerfile</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Dockerfile codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">FROM python:3.8-slim</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">WORKDIR /app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE 8501</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ADD requirements.txt /app/requirements.txt</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">RUN pip install -r requirements.txt</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ADD streamlit_app.py  uber-raw-data-sep14.csv.gz  uber_demo.png /app/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">CMD [&quot;streamlit&quot;,&quot;run&quot;,&quot;streamlit_app.py&quot;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="run-your-streamlit-container"></a>Run your Streamlit container<a class="hash-link" href="#run-your-streamlit-container" title="Direct link to heading">#</a></h4><p>To build your image, just run the command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">docker build --tag ekilab-demo-container </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Once built, you can run the container with the command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -dp </span><span class="token number">8501</span><span class="token plain">:8501 ekilab-demo-container</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Your app should now be running and available at <a href="http://localhost:8501" target="_blank" rel="noopener noreferrer">http://localhost:8501</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="live-reload"></a>Live Reload<a class="hash-link" href="#live-reload" title="Direct link to heading">#</a></h4><p>The issue with the current setup is that if you make a change to your app, you will need to rebuild and re-run the container to see the changes in your browser. We don&#x27;t want to rebuild the whole environment, and to do that we will use the <a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener noreferrer">volume</a> feature of Docker, and make it easy with <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">docker-compose</a>.
Docker-compose is a powerful tool to orchestrate multiple containers. But in our case, we will only use it to make our life easier. </p><div class="mdxCodeBlock_1zKU"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_2eSY">docker-compose.yml</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.9&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ekilab-demo-container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8501:8501&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> ./</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">/app </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now, you only need to remember one single command: <code>docker compose up</code>. It will build your image, run it with the correct parameters and link it to the correct volume.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ship-it-to-the-cloud-"></a>Ship it to the Cloud !<a class="hash-link" href="#ship-it-to-the-cloud-" title="Direct link to heading">#</a></h2><p>If you don&#x27;t have an Azure account, you can create one for <a href="https://azure.microsoft.com/en-us/free/" target="_blank" rel="noopener noreferrer">free</a> and get 200$ of credits for trying out the platform. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="log-into-azure"></a>Log into Azure<a class="hash-link" href="#log-into-azure" title="Direct link to heading">#</a></h3><p>Log into your account using the Azure CLI with the <code>az login</code> command.
Then, we will need a container registry. At Ekimetrics, we usually build our infrastructure using an Infrastructure-As-Code tool such as <a href="https://terraform.io" target="_blank" rel="noopener noreferrer">Terraform</a>. But for the sake of simplicity, let&#x27;s use simple CLI commands to create our resources.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="container-registry"></a>Container registry<a class="hash-link" href="#container-registry" title="Direct link to heading">#</a></h3><p>The container registry will store the different versions of our container. It can also be used to store other images. You can consider it as your private DockerHub.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">az acr create --name ekilabhub --resource-group ekimetrics-demo --sku basic --admin-enabled </span><span class="token boolean">true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="linux-app-service-plan"></a>Linux App Service Plan<a class="hash-link" href="#linux-app-service-plan" title="Direct link to heading">#</a></h3><p>To run our app, we need a Linux-based resource. This is what the App Service Plan offers.
B1 is a free instance that you can use for your small apps and Proof Of Concept.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">az appservice plan create --resource-group ekimetrics-demo -n ekimetrics-lasp -l westeurope --is-linux --sku B1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now, we have several options :</p><ul><li>Option 1 - build the image locally and push it to the container registry</li><li>Option 2 - build the image directly from the registry</li><li>Option 3 - build and push the image from a CI/CD pipeline</li></ul><p>Let&#x27;s try :</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># log into the container registry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">docker login ekilabhub.azurecr.io --username ekilabhub --password its4secr€t</span><span class="token operator">!</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Option 1 - push the new Docker image to the registry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">docker push ekilabhub.azurecr.io/ekilab/ekilab-demo-container:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Option 2 - directly build on Azure Container Registry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">az acr build --registry ekilabhub --resource-group ekimetrics-demo-rg --image ekilab-demo-container </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="the-web-app"></a>The Web App<a class="hash-link" href="#the-web-app" title="Direct link to heading">#</a></h3><p>Finally we can create the web app, based on our previously created App Service Plan, and by retrieving the image from the Container Registry.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">az webapp create --resource-group ekimetrics-demo-rg -p ekimetrics-lasp -n ekilab-demo-app -i ekilabhub.azurecr.io/ekilab/ekilab-demo-container:latest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="lets-automate"></a>Let&#x27;s Automate!<a class="hash-link" href="#lets-automate" title="Direct link to heading">#</a></h2><p>It&#x27;s all been fun but we don&#x27;t want to do this every time we update the code. It would be easy to make a mistake and you may want to collaborate with other Data Scientists on your team and have their updates deployed without your help!</p><p><img alt="automate-all-the-things" src="/assets/images/automate-b4b2aaa382f4c26530ad030ace0cfb08.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="bitbucket-pipelines"></a>Bitbucket Pipelines<a class="hash-link" href="#bitbucket-pipelines" title="Direct link to heading">#</a></h3><p>In this example we are using <a href="https://bitbucket.org/product/fr/features/pipelines" target="_blank" rel="noopener noreferrer">Bitbucket Pipelines</a> to automate these deployment steps but the logic is very similar in other tools such as <a href="https://dev.azure.com/" target="_blank" rel="noopener noreferrer">Azure DevOps</a>, <a href="https://cloud.google.com/build" target="_blank" rel="noopener noreferrer">Cloud Build</a>, <a href="https://docs.gitlab.com/ee/ci/introduction/" target="_blank" rel="noopener noreferrer">Gitlab CI/CD</a>, <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a>, <a href="https://www.jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins</a>...</p><p>The common concept behind these tools is to store all the instructions in a YAML file and execute them at every commit to a given branch. In our example, the master branch gathers the code that will be delivered to production.</p><div class="mdxCodeBlock_1zKU"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_2eSY">bitbucket-pipelines.yml</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> python</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">3.8</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">pipelines</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">master</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">step</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Build and Push the image         </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># build the image</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker build </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">t ekilabhub.azurecr.io/ekilab/ekilab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">$BITBUCKET_BUILD_NUMBER .</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># authenticate with the Azure Container Registry </span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker login ekilabhub.azurecr.io </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">username ekilabhub </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">password  $AZURE_CONTAINER_REGISTRY_PASSWORD</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># push the new Docker image to the registry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> docker push ekilabhub.azurecr.io/ekilab/ekilab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">$BITBUCKET_BUILD_NUMBER</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">step</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deploying App to Azure</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># Install the Azure CLI</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> curl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">sL https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//aka.ms/InstallAzureCLIDeb </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> bash </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># login with a Service Principal / store the credentials in a secured area</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> az login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">principal </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">username $AZURE_APP_ID </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">password $AZURE_PASSWORD </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tenant $AZURE_TENANT_ID </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># Set the correct image version to the web app </span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> az webapp config container set  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">resource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group $AZURE_RESOURCE_GROUP  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">name ekilab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">custom</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">name ekilab</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">$BITBUCKET_BUILD_NUMBER  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">url ekilabhub.azurecr.io </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">user ekilabhub </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">password $AZURE_CONTAINER_REGISTRY_PASSWORD</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="whats-next-"></a>What&#x27;s next ?<a class="hash-link" href="#whats-next-" title="Direct link to heading">#</a></h2><p><strong>Congratulations !</strong> You should now be able to automate the deployment of your app to the cloud and focus only on updating its content without worrying about how to publish your updates. Now, you might need to have a scalable app to ensure it can handle high loads of visits. You could require tools like <a href="https://kubernetes.io" target="_blank" rel="noopener noreferrer">Kubernetes</a>, <a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener noreferrer">Docker Swarm</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="alternatives"></a>Alternatives<a class="hash-link" href="#alternatives" title="Direct link to heading">#</a></h3><p>We presented one of the workflow we are using at Ekimetrics, but it&#x27;s not the only one ! We also work with GCP, AWS, Alibaba, sometimes on-premise infrastructure that will prevent us from using Docker or Azure for example.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web-app-framework"></a>Web App framework<a class="hash-link" href="#web-app-framework" title="Direct link to heading">#</a></h5><p>Soe alternavites to streamlit that are also offering low-code, minimalist, <em>straight-to-the-data</em> python framework that you can package in a container.</p><ul><li><a href="https://plotly.com/dash/" target="_blank" rel="noopener noreferrer">Dash Plotly</a></li><li><a href="https://gradio.app/" target="_blank" rel="noopener noreferrer">Gradio.app</a></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="containers"></a>Containers<a class="hash-link" href="#containers" title="Direct link to heading">#</a></h5><p>Docker is not the only containerization tool. Here are some alternatives we invite you to check out if Docker doesn&#x27;t suit you.</p><ul><li><a href="https://podman.io/" target="_blank" rel="noopener noreferrer">podman</a></li><li><a href="https://containerd.io/" target="_blank" rel="noopener noreferrer">containerd</a></li><li><a href="https://coreos.com/rkt/docs/latest/" target="_blank" rel="noopener noreferrer">CoreOS rkt</a></li><li><a href="http://mesos.apache.org/documentation/latest/mesos-containerizer/" target="_blank" rel="noopener noreferrer">Mesos Containerizer</a></li><li><a href="https://linuxcontainers.org/" target="_blank" rel="noopener noreferrer">LXC Linux Containers</a></li><li><a href="https://openvz.org/" target="_blank" rel="noopener noreferrer">OpenVZ</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web-app-hosting"></a>Web App Hosting<a class="hash-link" href="#web-app-hosting" title="Direct link to heading">#</a></h4><p>There are many others ways to deploy your apps, even free tiers on some providers that can help you get your hands-on with smaller, non-sensitive apps.</p><ul><li><a href="https://streamlit.io/cloud" target="_blank" rel="noopener noreferrer">Streamlit Cloud</a> offers a free tier to host one private app and <strong>unlimited</strong> public apps! Deployment is <a href="https://s3-us-west-2.amazonaws.com/assets.streamlit.io/videos/streamlit_sharing_silent.mp4" target="_blank" rel="noopener noreferrer">very simple with GitHub</a></li><li><a href="https://azure.microsoft.com/en-us/services/container-apps/" target="_blank" rel="noopener noreferrer">Azure Container App</a> a new offer from Microsoft that helps you simply deploy scalable apps.</li><li><a href="https://cloud.google.com/run" target="_blank" rel="noopener noreferrer">GCP Cloud Run</a>, similar to Azure Apps, is a serverless service that helps easily deploy pre-built containerized apps.</li><li><a href="https://www.heroku.com/" target="_blank" rel="noopener noreferrer">Heroku</a> offers a free tier to deploy small apps, Proof Of Concept and also a very simple deployment process.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="credits"></a>Credits<a class="hash-link" href="#credits" title="Direct link to heading">#</a></h2><ul><li>Cover Photo by <a href="https://unsplash.com/@anniespratt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener noreferrer">Annie Spratt</a> on <a href="https://unsplash.com/s/photos/rainbow-cake?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener noreferrer">Unsplash</a></li><li><a href="https://cloud.google.com/architecture/best-practices-for-building-containers#package_a_single_application_per_container" target="_blank" rel="noopener noreferrer">Google&#x27;s Best Practices for building Containers</a></li><li><a href="https://pythonspeed.com/articles/base-image-python-docker-images/" target="_blank" rel="noopener noreferrer">The best Docker base image for your Python application (August 2021)</a></li></ul></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/dev-ops">DevOps</a><a class="margin-horiz--sm" href="/blog/tags/data-ops">DataOps</a><a class="margin-horiz--sm" href="/blog/tags/containers">Containers</a><a class="margin-horiz--sm" href="/blog/tags/ci-cd">CI/CD</a><a class="margin-horiz--sm" href="/blog/tags/azure">Azure</a><a class="margin-horiz--sm" href="/blog/tags/docker">Docker</a></div></footer></article><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2022/05/02/newsletter_April-2022"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« Newsletter for April 2022</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2022/03/30/newsletter_March-2022"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Newsletter for March 2022 »</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#data-science-storytelling-with-streamlit" class="table-of-contents__link">Data Science storytelling with Streamlit</a><ul><li><a href="#running-the-app" class="table-of-contents__link">Running the app</a></li></ul></li><li><a href="#docker-the-cloudy-whale" class="table-of-contents__link">Docker, the cloudy whale</a><ul><li><a href="#creating-your-container" class="table-of-contents__link">Creating your container</a></li><li><a href="#efficient-build-instructions" class="table-of-contents__link">Efficient Build Instructions</a></li></ul></li><li><a href="#ship-it-to-the-cloud-" class="table-of-contents__link">Ship it to the Cloud !</a><ul><li><a href="#log-into-azure" class="table-of-contents__link">Log into Azure</a></li><li><a href="#container-registry" class="table-of-contents__link">Container registry</a></li><li><a href="#linux-app-service-plan" class="table-of-contents__link">Linux App Service Plan</a></li><li><a href="#the-web-app" class="table-of-contents__link">The Web App</a></li></ul></li><li><a href="#lets-automate" class="table-of-contents__link">Let&#39;s Automate!</a><ul><li><a href="#bitbucket-pipelines" class="table-of-contents__link">Bitbucket Pipelines</a></li></ul></li><li><a href="#whats-next-" class="table-of-contents__link">What&#39;s next ?</a><ul><li><a href="#alternatives" class="table-of-contents__link">Alternatives</a></li></ul></li><li><a href="#credits" class="table-of-contents__link">Credits</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">About us</h4><ul class="footer__items"><li class="footer__item"><a href="https://ekimetrics.com/who-we-are/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Who we are ?</a></li><li class="footer__item"><a href="https://ekimetrics.com/our-team/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Our team</a></li><li class="footer__item"><a href="https://ekimetrics.us13.list-manage.com/subscribe?u=85b8ce42caa0a733e98233bc4&amp;id=6355d0a6f9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to our newsletter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Find us</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ekimetrics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://ekimetrics.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://www.welcometothejungle.com/fr/companies/ekimetrics" target="_blank" rel="noopener noreferrer" class="footer__link-item">Eki on Welcome to the jungle</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:inno@ekimetrics.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get in touch with our teams</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/styles.a86cb2b9.js"></script>
<script src="/runtime~main.16ee1cc3.js"></script>
<script src="/main.1ce0ccbc.js"></script>
<script src="/1.d09c2bfd.js"></script>
<script src="/2.3a5ef20e.js"></script>
<script src="/154.528a8f1d.js"></script>
<script src="/01a85c17.ad84d4ef.js"></script>
<script src="/1be78505.834197f3.js"></script>
<script src="/56ff6114.a42a20d4.js"></script>
<script src="/6875c492.61005495.js"></script>
<script src="/a6aa9e1f.fa005530.js"></script>
<script src="/bc11c333.84a44cd2.js"></script>
<script src="/c4f5d8e4.99070e4e.js"></script>
<script src="/ccc49370.f2fa0dcb.js"></script>
<script src="/157.c62993df.js"></script>
<script src="/ece8ad2d.ef5e4502.js"></script>
<script src="/dc395c26.c29b3d37.js"></script>
</body>
</html>